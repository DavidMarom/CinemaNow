(this.webpackJsonpcinema=this.webpackJsonpcinema||[]).push([[0],{69:function(e,t,n){},70:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(19),s=n.n(a),o=n(6),i=n(2),u=n.n(i),l=n(5),j=n(38),h="/api/",b=n.n(j).a.create({withCredentials:!0}),p=function(e,t){return"undefined"===e&&(e=""),f(e,"GET",t)},d=function(e,t){return f(e,"POST",t)},v=function(e,t){return f(e,"PUT",t)},O=function(e,t){return f(e,"DELETE",t)};function f(e){return m.apply(this,arguments)}function m(){return(m=Object(l.a)(u.a.mark((function e(t){var n,c,r,a=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:"get",c=a.length>2&&void 0!==a[2]?a[2]:null,e.prev=2,e.next=5,b({url:"".concat(h).concat(t),method:n,data:c});case 5:return r=e.sent,e.abrupt("return",r.data);case 9:throw e.prev=9,e.t0=e.catch(2),console.log("Had Issues ".concat(n,"ing to the backend, endpoint: ").concat(t,", with data: ").concat(c)),console.dir(e.t0),e.t0.response&&401===e.t0.response.status&&window.location.assign("/#/login"),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function x(){return(x=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d("movie/add",t);case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function w(){return(w=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p("movie/");case 3:return t=e.sent,e.abrupt("return",t);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function g(){return(g=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O("movie/".concat(t));case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var S={addMov:function(e){return x.apply(this,arguments)},getAllMovies:function(){return w.apply(this,arguments)},removeMov:function(e){return g.apply(this,arguments)}};function N(){return console.log("action: get all movies"),function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.getAllMovies();case 3:n=e.sent,t({type:"LOAD_MOV",allMov:n}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("SettingsActions: err in getAllMovies",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}function _(){return(_=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d("show/add",t);case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function y(){return(y=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p("show/");case 3:return t=e.sent,e.abrupt("return",t);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function k(){return(k=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O("show/".concat(t));case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var M={addShow:function(e){return _.apply(this,arguments)},getAllShows:function(){return y.apply(this,arguments)},removeShow:function(e){return k.apply(this,arguments)},update:function(e){return v("show/update",e)}};function E(){return console.log("action: get all shows"),function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.getAllShows();case 3:n=e.sent,t({type:"LOAD_SHOW",allShow:n}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("err in getAllShows",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}var A=n(16),D=n(1);var C=function(){var e=Object(o.c)();return Object(c.useEffect)((function(){e(N()),e(E()),console.log("nav-bar")}),[]),Object(D.jsxs)("div",{className:"nav-bar ca",children:[Object(D.jsx)("h1",{children:"Cinema Now"}),Object(D.jsx)(A.a,{to:"/",children:Object(D.jsx)("p",{className:"nav-btn",children:"Find Movies"})}),Object(D.jsx)(A.a,{to:"/movies",children:Object(D.jsx)("p",{className:"nav-btn",children:"Our Movies"})}),Object(D.jsx)(A.a,{to:"/shows",children:Object(D.jsx)("p",{className:"nav-btn",children:"Manage Shows"})})]})},T=n(11);var R={getMovie:function(e){return p("tmdb/".concat(e))}},H=n(8),V=Object(H.a)(),I=function(e){var t=e.mov,n=(e.btnAdd,e.btnRemove,Object(o.c)());return Object(D.jsxs)("div",{className:"rb movie-strip",children:[Object(D.jsxs)("div",{className:"ral",children:[Object(D.jsx)("div",{className:"add-button-col",children:Object(D.jsxs)("button",{className:"btn2 lnk-btn",onClick:function(){n(function(e){return function(){var t=Object(l.a)(u.a.mark((function t(n){var c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.addMov(e);case 3:c=t.sent,n({type:"ADD_MOV",_mov:c}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("SettingsActions: err in addMov",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}(t)),setTimeout((function(){V.push("/movies")}),500)},children:[Object(D.jsx)("i",{className:"fas fa-plus"})," Add"]})}),Object(D.jsx)("p",{className:"movie-title",children:t.name})]}),Object(D.jsxs)("p",{className:"movie-id",children:["id: ",t.id]})]})},L=function(){var e=Object(c.useState)("matr"),t=Object(T.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(Date.now()),s=Object(T.a)(a,2),o=s[0],i=s[1],u=Object(c.useState)(0),l=Object(T.a)(u,2),j=l[0],h=l[1],b=Object(c.useState)(),p=Object(T.a)(b,2),d=p[0],v=p[1];return Object(c.useEffect)((function(){n&&(Date.now()-o>2e3?(R.getMovie(n).then((function(e){v(e)})),i(Date.now())):(h(j+1),setTimeout((function(){(1===j||j<1)&&(R.getMovie(n).then((function(e){v(e)})),i(Date.now()),h(j-1))}),1e3)))}),[n]),Object(D.jsxs)("div",{className:"page-general",children:[Object(D.jsxs)("div",{className:"hor-block",children:[Object(D.jsx)("h1",{children:"Explore new movies"}),Object(D.jsxs)("div",{className:"search-bar ral",children:[Object(D.jsx)("p",{children:"Search for new movies: "}),Object(D.jsx)("input",{className:"input",value:n,type:"text",onChange:function(e){r(e.target.value)}})]})]}),d?d.results.map((function(e,t){return Object(D.jsx)(I,{mov:e,btnAdd:!0,btnRemove:!1},t)})):null]})},W=function(e){var t=e.show,n=Object(o.c)(),r=Object(c.useState)(!1),a=Object(T.a)(r,2),s=a[0],i=a[1],j=Object(c.useState)(),h=Object(T.a)(j,2),b=h[0],p=h[1],d=Object(c.useState)(),v=Object(T.a)(d,2),O=v[0],f=v[1],m=Object(D.jsx)("i",{className:"far fa-trash-alt"});Object(c.useEffect)((function(){console.log("TITLE:",t.title)}),[]);var x=Object(D.jsxs)("form",{onSubmit:function(e){e.preventDefault();var c=Date.parse(O),r=t;r.hall=b,r.time=O,r.ts=c,n(function(e){return function(){var t=Object(l.a)(u.a.mark((function t(n){var c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,M.update(e);case 3:c=t.sent,n({type:"UPDATE_SHOW",_show:c}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("err in updateShow",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}(r)),i(!1)},className:"ral",children:[Object(D.jsx)("input",{type:"number",name:"hall",onChange:function(e){p(e.target.value)}}),Object(D.jsx)("input",{type:"datetime-local",name:"time",onChange:function(e){f(e.target.value)}}),Object(D.jsx)("div",{children:Object(D.jsx)("button",{children:"Update"})})]});return Object(D.jsx)("div",{className:"rb movie-strip",children:Object(D.jsxs)("div",{className:"ral",children:[Object(D.jsx)("button",{className:"btn-del lnk-btn",onClick:function(){var e;n((e=t._id,function(){var t=Object(l.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,M.removeShow(e);case 3:n({type:"REMOVE_SHOW",showId:e}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log("err in removeShow",t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}())),V.push("/shows")},children:m}),Object(D.jsx)("p",{className:"movie-title",children:t.title}),Object(D.jsxs)("p",{className:"movie-title",children:["Hall: ",t.hall]}),Object(D.jsx)("p",{className:"movie-title",children:t.time}),Object(D.jsx)("button",{className:"btn2 lnk-btn",onClick:function(){return i(!s)},children:s?Object(D.jsx)("p",{children:"\u25c4 Cancel"}):Object(D.jsx)("p",{children:"update"})}),Object(D.jsx)("div",{children:s?x:null})]})})},P=function(){var e=Object(o.c)(),t=Object(o.d)((function(e){return e.showReducer.show}));return Object(c.useEffect)((function(){e(E())}),[]),Object(D.jsxs)("div",{className:"page-general",children:[console.log(t),Object(D.jsx)("div",{className:"hor-block",children:Object(D.jsx)("h1",{children:"Shows"})}),t?t.map((function(e,t){return Object(D.jsx)(W,{show:e},t)})):console.log("STATE NOT READY")]})},U=function(e){var t=e.mov,n=Object(o.c)(),r=Object(c.useState)(!1),a=Object(T.a)(r,2),s=a[0],i=a[1],j=Object(c.useState)(0),h=Object(T.a)(j,2),b=h[0],p=h[1],d=Object(c.useState)(),v=Object(T.a)(d,2),O=v[0],f=v[1],m=Object(D.jsx)("i",{className:"far fa-trash-alt"}),x=Object(D.jsxs)("form",{onSubmit:function(e){e.preventDefault();var c,r=Date.parse(O),a={title:t.name,hall:b,time:O,ts:r};n((c=a,function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.addShow(c);case 3:n=e.sent,t({type:"ADD_SHOW",_show:n}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("err in addShow",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}())),i(!1)},className:"ral",children:[Object(D.jsx)("input",{type:"number",name:"hall",onChange:function(e){p(e.target.value)},placeholder:"Hall"}),Object(D.jsx)("input",{type:"datetime-local",name:"time",onChange:function(e){f(e.target.value)}}),Object(D.jsx)("div",{children:Object(D.jsx)("button",{children:"Add"})})]});return Object(D.jsxs)("div",{className:"rb movie-strip",children:[Object(D.jsxs)("div",{className:"ral",children:[Object(D.jsx)("button",{className:"btn-del lnk-btn",onClick:function(){var e;n((e=t._id,function(){var t=Object(l.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.removeMov(e);case 3:n({type:"REMOVE_MOV",movId:e}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log("AnnActions: err in removeMov",t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}())),V.push("/movies")},children:m}),Object(D.jsx)("p",{className:"movie-title",children:t.name}),Object(D.jsx)("button",{className:"btn2 lnk-btn",onClick:function(){return i(!s)},children:s?Object(D.jsx)("p",{children:"\u25c4 Cancel"}):Object(D.jsx)("p",{children:"Add Show"})}),Object(D.jsx)("div",{children:s?x:null})]}),Object(D.jsx)("div",{className:"h-center",children:Object(D.jsxs)("p",{className:"movie-id",children:["id: ",t.id]})})]})},F=function(){var e=Object(o.c)(),t=Object(o.d)((function(e){return e.movReducer.mov}));return Object(c.useEffect)((function(){e(N())}),[]),Object(D.jsxs)("div",{className:"page-general",children:[Object(D.jsxs)("div",{className:"hor-block",children:[Object(D.jsx)("h1",{children:"Our Movies"}),Object(D.jsx)("p",{children:"This is our local movie library. Use the items below to create shows"})]}),t?t.map((function(e,t){return Object(D.jsx)(U,{mov:e},t)})):null]})},B=n(4),J=Object(o.b)(null,null)(Object(B.f)((function(){return Object(D.jsx)("div",{className:"App",children:Object(D.jsx)("div",{className:"outter-container",children:Object(D.jsxs)("div",{className:"inner-container",children:[Object(D.jsx)(C,{}),Object(D.jsxs)(B.c,{children:[Object(D.jsx)(B.a,{exact:!0,component:L,path:"/"}),Object(D.jsx)(B.a,{exact:!0,component:P,path:"/shows"}),Object(D.jsx)(B.a,{exact:!0,component:F,path:"/movies"})]})]})})})}))),X=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,71)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))},G=n(14),Y=n(39),q=n(22),z=n(13),K={mov:[]};var Q={show:[]};var Z=Object(G.c)({movReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"LOAD_MOV":return{mov:t.allMov};case"ADD_MOV":return Object(z.a)(Object(z.a)({},e),{},{mov:[].concat(Object(q.a)(e.mov),[e.mov.map((function(e){return t._mov._id===e._id?t._mov:e}))])});case"REMOVE_MOV":return Object(z.a)(Object(z.a)({},e),{},{mov:e.mov.filter((function(e){return e._id!==t.movId}))});default:return e}},showReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"LOAD_SHOW":return{show:t.allShow};case"ADD_SHOW":return Object(z.a)(Object(z.a)({},e),{},{show:[].concat(Object(q.a)(e.show),[e.show.map((function(e){return t._show._id===e._id?t._show:e}))])});case"REMOVE_SHOW":return Object(z.a)(Object(z.a)({},e),{},{show:e.show.filter((function(e){return e._id!==t.showId}))});case"UPDATE_SHOW":return console.log("reducer",t._show),Object(z.a)(Object(z.a)({},e),{},{show:e.show.map((function(e){return t._show._id===e._id?t._show:e}))});default:return e}}}),$=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||G.d,ee=Object(G.e)(Z,$(Object(G.a)(Y.a)));n(69);s.a.render(Object(D.jsx)(r.a.StrictMode,{children:Object(D.jsx)(B.b,{history:V,children:Object(D.jsx)(o.a,{store:ee,children:Object(D.jsx)(J,{})})})}),document.getElementById("root")),X()}},[[70,1,2]]]);
//# sourceMappingURL=main.9ac64b7e.chunk.js.map