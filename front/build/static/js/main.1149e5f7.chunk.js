(this.webpackJsonpcinema=this.webpackJsonpcinema||[]).push([[0],{69:function(e,t,n){},70:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(19),s=n.n(a),o=n(10),i=n(4),u=n.n(i),l=n(11),v=n(37),j="/api/",b=n.n(v).a.create({withCredentials:!0}),d=function(e,t){return"undefined"===e&&(e=""),O(e,"GET",t)},p=function(e,t){return O(e,"POST",t)},h=function(e,t){return O(e,"DELETE",t)};function O(e){return f.apply(this,arguments)}function f(){return(f=Object(l.a)(u.a.mark((function e(t){var n,c,r,a=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:"get",c=a.length>2&&void 0!==a[2]?a[2]:null,e.prev=2,e.next=5,b({url:"".concat(j).concat(t),method:n,data:c});case 5:return r=e.sent,e.abrupt("return",r.data);case 9:throw e.prev=9,e.t0=e.catch(2),console.log("Had Issues ".concat(n,"ing to the backend, endpoint: ").concat(t,", with data: ").concat(c)),console.dir(e.t0),e.t0.response&&401===e.t0.response.status&&window.location.assign("/#/login"),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function m(){return(m=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p("movie/add",t);case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function x(){return(x=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d("movie/");case 3:return t=e.sent,e.abrupt("return",t);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function g(){return(g=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h("movie/".concat(t));case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var w={addMov:function(e){return m.apply(this,arguments)},getAllMovies:function(){return x.apply(this,arguments)},removeMov:function(e){return g.apply(this,arguments)}};var M=n(14),N=n(1);var _=function(){var e=Object(o.c)();return Object(c.useEffect)((function(){e(function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.getAllMovies();case 3:n=e.sent,t({type:"LOAD_MOV",allMov:n}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("SettingsActions: err in getAllMovies",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(N.jsxs)("div",{className:"nav-bar ca",children:[Object(N.jsx)("h1",{children:"Cinema Now"}),Object(N.jsx)(M.a,{to:"/",children:Object(N.jsx)("p",{className:"nav-btn",children:"Find Movies"})}),Object(N.jsx)(M.a,{to:"/movies",children:Object(N.jsx)("p",{className:"nav-btn",children:"Our Movies"})}),Object(N.jsx)(M.a,{to:"/shows",children:Object(N.jsx)("p",{className:"nav-btn",children:"Manage Shows"})})]})},y=n(15);var E={getMovie:function(e){return d("tmdb/".concat(e))}},k=n(6),A=Object(k.a)(),S=function(e){var t=e.mov,n=e.btnAdd,c=e.btnRemove;console.log(t);var r=Object(o.c)();return Object(N.jsxs)("div",{className:"rb movie-strip",children:[Object(N.jsxs)("div",{className:"ral",children:[Object(N.jsxs)("div",{className:"add-button-col",children:[n?Object(N.jsxs)("button",{className:"btn2 lnk-btn",onClick:function(){r(function(e){return function(){var t=Object(l.a)(u.a.mark((function t(n){var c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w.addMov(e);case 3:c=t.sent,n({type:"ADD_MOV",_mov:c}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("SettingsActions: err in addMov",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}(t)),A.push("/movies")},children:[Object(N.jsx)("i",{className:"fas fa-plus"}),"Add to cinema"]}):null,c?Object(N.jsxs)("button",{className:"btn2 lnk-btn",onClick:function(){var e;r((e=t._id,function(){var t=Object(l.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w.removeMov(e);case 3:n({type:"REMOVE_MOV",movId:e}),console.log("removed"),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("AnnActions: err in removeMov",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}())),A.push("/movies")},children:[Object(N.jsx)("i",{className:"far fa-trash-alt"}),"Remove"]}):null]}),Object(N.jsx)("p",{className:"movie-title",children:t.name})]}),Object(N.jsx)("p",{className:"movie-id",children:t.id})]})},D=function(){var e=Object(c.useState)(1),t=Object(y.a)(e,2),n=t[0],r=t[1],a=function(){r(n+1),console.log("refresh func activated")},s=Object(c.useState)("fight club"),o=Object(y.a)(s,2),i=o[0],u=o[1],l=Object(c.useState)(Date.now()),v=Object(y.a)(l,2),j=v[0],b=v[1],d=Object(c.useState)(0),p=Object(y.a)(d,2),h=p[0],O=p[1],f=Object(c.useState)(),m=Object(y.a)(f,2),x=m[0],g=m[1];return Object(c.useEffect)((function(){i&&(Date.now()-j>2e3?(E.getMovie(i).then((function(e){g(e)})),b(Date.now())):(O(h+1),setTimeout((function(){(1===h||h<1)&&(E.getMovie(i).then((function(e){g(e)})),b(Date.now()),O(h-1))}),1e3)))}),[i]),Object(c.useEffect)((function(){console.log("update")}),[n]),Object(N.jsxs)("div",{className:"page-general",children:[Object(N.jsx)("h2",{children:"Explore new movies"}),Object(N.jsxs)("div",{className:"search-bar ral",children:[Object(N.jsx)("p",{children:"Search for new movies: "}),Object(N.jsx)("input",{className:"input",value:i,type:"text",onChange:function(e){u(e.target.value)}})]}),x?x.results.map((function(e,t){return Object(N.jsx)(S,{mov:e,btnAdd:!0,btnRemove:!1,doRefresh:a},t)})):null]})},R=function(){return Object(N.jsx)("div",{className:"page-general",children:Object(N.jsx)("h1",{children:"Shows"})})},C=function(){var e=Object(o.d)((function(e){return e.movReducer.mov}));return Object(N.jsxs)("div",{className:"page-general",children:[Object(N.jsx)("h1",{children:"Movies"}),e?e.map((function(e,t){return Object(N.jsx)(S,{mov:e,btnAdd:!1,btnRemove:!0},t)})):null]})},V=n(3),T=Object(o.b)(null,null)(Object(V.f)((function(){return Object(N.jsx)("div",{className:"App",children:Object(N.jsx)("div",{className:"outter-container",children:Object(N.jsxs)("div",{className:"inner-container",children:[Object(N.jsx)(_,{}),Object(N.jsxs)(V.c,{children:[Object(N.jsx)(V.a,{exact:!0,component:D,path:"/"}),Object(N.jsx)(V.a,{exact:!0,component:R,path:"/shows"}),Object(N.jsx)(V.a,{exact:!0,component:C,path:"/movies"})]})]})})})}))),I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,71)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))},L=n(12),F=n(38),P=n(39),B=n(18),J={mov:[]};var X=Object(L.c)({movReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"LOAD_MOV":return{mov:t.allMov};case"ADD_MOV":return Object(B.a)(Object(B.a)({},e),{},{mov:[].concat(Object(P.a)(e.mov),[e.mov.map((function(e){return t._mov._id===e._id?t._mov:e}))])});case"REMOVE_MOV":return Object(B.a)(Object(B.a)({},e),{},{mov:e.mov.filter((function(e){return e._id!==t.movId}))});default:return e}}}),G=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||L.d,H=Object(L.e)(X,G(Object(L.a)(F.a)));n(69);s.a.render(Object(N.jsx)(r.a.StrictMode,{children:Object(N.jsx)(V.b,{history:A,children:Object(N.jsx)(o.a,{store:H,children:Object(N.jsx)(T,{})})})}),document.getElementById("root")),I()}},[[70,1,2]]]);
//# sourceMappingURL=main.1149e5f7.chunk.js.map