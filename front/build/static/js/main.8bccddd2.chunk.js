(this.webpackJsonpcinema=this.webpackJsonpcinema||[]).push([[0],{69:function(e,t,n){},70:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(19),s=n.n(a),o=n(5),i=n(2),u=n.n(i),l=n(6),j=n(38),p="/api/",h=n.n(j).a.create({withCredentials:!0}),b=function(e,t){return"undefined"===e&&(e=""),f(e,"GET",t)},v=function(e,t){return f(e,"POST",t)},d=function(e,t){return f(e,"PUT",t)},O=function(e,t){return f(e,"DELETE",t)};function f(e){return m.apply(this,arguments)}function m(){return(m=Object(l.a)(u.a.mark((function e(t){var n,c,r,a=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:"get",c=a.length>2&&void 0!==a[2]?a[2]:null,e.prev=2,e.next=5,h({url:"".concat(p).concat(t),method:n,data:c});case 5:return r=e.sent,e.abrupt("return",r.data);case 9:throw e.prev=9,e.t0=e.catch(2),console.log("Had Issues ".concat(n,"ing to the backend, endpoint: ").concat(t,", with data: ").concat(c)),console.dir(e.t0),e.t0.response&&401===e.t0.response.status&&window.location.assign("/#/login"),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function x(){return(x=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v("movie/add",t);case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function w(){return(w=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b("movie/");case 3:return t=e.sent,e.abrupt("return",t);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function g(){return(g=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O("movie/".concat(t));case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var N={addMov:function(e){return x.apply(this,arguments)},getAllMovies:function(){return w.apply(this,arguments)},removeMov:function(e){return g.apply(this,arguments)}};function S(){return function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.getAllMovies();case 3:n=e.sent,t({type:"LOAD_MOV",allMov:n}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("SettingsActions: err in getAllMovies",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}function y(){return(y=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v("show/add",t);case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function _(){return(_=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b("show/");case 3:return t=e.sent,e.abrupt("return",t);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function k(){return(k=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O("show/".concat(t));case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function E(){return(E=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d("show/update",t);case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var M={addShow:function(e){return y.apply(this,arguments)},getAllShows:function(){return _.apply(this,arguments)},removeShow:function(e){return k.apply(this,arguments)},update:function(e){return E.apply(this,arguments)}};function A(){return function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.getAllShows();case 3:n=e.sent,t({type:"LOAD_SHOW",allShow:n}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("err in getAllShows",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}var D=n(16),C=n(1);var T=function(){var e=Object(o.d)((function(e){return e.pageReducer.pageName})),t=Object(o.c)();return Object(c.useEffect)((function(){t(S()),t(A())}),[]),Object(C.jsxs)("div",{className:"nav-bar ca",children:[Object(C.jsx)("h1",{children:"Cinema Now"}),Object(C.jsx)("div",{className:"1"===e?"active-cell":"inactive-cell",children:Object(C.jsx)(D.a,{to:"/",children:Object(C.jsx)("p",{className:"nav-btn",children:"Find Movies"})})}),Object(C.jsx)("div",{className:"2"===e?"active-cell":"inactive-cell",children:Object(C.jsx)(D.a,{to:"/movies",children:Object(C.jsx)("p",{className:"nav-btn",children:"Our Movies"})})}),Object(C.jsx)("div",{className:"3"===e?"active-cell":"inactive-cell",children:Object(C.jsx)(D.a,{to:"/shows",children:Object(C.jsx)("p",{className:"nav-btn",children:"Manage Shows"})})})]})},R=n(11);var H={getMovie:function(e){return b("tmdb/".concat(e))}},V=n(8),P=Object(V.a)(),I=function(e){var t=e.mov,n=Object(o.c)();return Object(C.jsxs)("div",{className:"rb movie-strip",children:[Object(C.jsxs)("div",{className:"ral",children:[Object(C.jsx)("div",{className:"add-button-col",children:Object(C.jsxs)("button",{className:"btn2 lnk-btn",onClick:function(){n(function(e){return function(){var t=Object(l.a)(u.a.mark((function t(n){var c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,N.addMov(e);case 3:c=t.sent,n({type:"ADD_MOV",_mov:c}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("SettingsActions: err in addMov",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}(t)),setTimeout((function(){P.push("/movies")}),500)},children:[Object(C.jsx)("i",{className:"fas fa-plus"})," Add"]})}),Object(C.jsx)("p",{className:"movie-title",children:t.name})]}),Object(C.jsxs)("p",{className:"movie-id",children:["id: ",t.id]})]})};function L(e){return function(t){t({type:"PAGE_NAME",name:e})}}var W=function(){var e=Object(o.c)(),t=Object(c.useState)("movie"),n=Object(R.a)(t,2),r=n[0],a=n[1],s=Object(c.useState)(Date.now()),i=Object(R.a)(s,2),u=i[0],l=i[1],j=Object(c.useState)(0),p=Object(R.a)(j,2),h=p[0],b=p[1],v=Object(c.useState)(),d=Object(R.a)(v,2),O=d[0],f=d[1];return Object(c.useEffect)((function(){r&&(Date.now()-u>2e3?(H.getMovie(r).then((function(e){f(e)})),l(Date.now())):(b(h+1),setTimeout((function(){(1===h||h<1)&&(H.getMovie(r).then((function(e){f(e)})),l(Date.now()),b(h-1))}),1e3)))}),[r]),Object(c.useEffect)((function(){e(L("1"))})),Object(C.jsxs)("div",{className:"page-general",children:[Object(C.jsxs)("div",{className:"hor-block",children:[Object(C.jsx)("h1",{children:"Explore new movies"}),Object(C.jsxs)("div",{className:"search-bar ral",children:[Object(C.jsx)("p",{children:"Search for new movies: "}),Object(C.jsx)("input",{className:"input",value:r,type:"text",onChange:function(e){a(e.target.value)}})]})]}),O?O.results.map((function(e,t){return Object(C.jsx)(I,{mov:e},t)})):null]})},U=function(e){var t=e.show,n=Object(o.c)(),r=Object(c.useState)(!1),a=Object(R.a)(r,2),s=a[0],i=a[1],j=Object(c.useState)(),p=Object(R.a)(j,2),h=p[0],b=p[1],v=Object(c.useState)(),d=Object(R.a)(v,2),O=d[0],f=d[1],m=Object(C.jsx)("i",{className:"far fa-trash-alt"});Object(c.useEffect)((function(){b(t.hall),f(t.time)}),[]);var x=Object(C.jsxs)("form",{onSubmit:function(e){e.preventDefault();var c=Date.parse(O),r=t;r.hall=h,r.time=O,r.ts=c,n(function(e){return function(){var t=Object(l.a)(u.a.mark((function t(n){var c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,M.update(e);case 3:c=t.sent,n({type:"UPDATE_SHOW",_show:c}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("err in updateShow",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}(r)),i(!1),setTimeout((function(){n(A())}),500)},className:"ral",children:[Object(C.jsx)("input",{className:"input",type:"number",name:"hall",value:h,onChange:function(e){b(e.target.value)}}),Object(C.jsx)("input",{className:"input",type:"datetime-local",name:"time",value:O,onChange:function(e){f(e.target.value)}}),Object(C.jsx)("div",{children:Object(C.jsx)("button",{className:"btn-update",children:"Update"})})]});return Object(C.jsx)("div",{className:"rb movie-strip",children:Object(C.jsxs)("div",{className:"ral",children:[Object(C.jsx)("button",{className:"btn-del lnk-btn",onClick:function(){var e;n((e=t._id,function(){var t=Object(l.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,M.removeShow(e);case 3:n({type:"REMOVE_SHOW",showId:e}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log("err in removeShow",t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}())),P.push("/shows")},children:m}),Object(C.jsx)("p",{className:"movie-title",children:t.title}),Object(C.jsxs)("p",{className:"movie-title",children:["Hall: ",t.hall]}),Object(C.jsx)("p",{className:"movie-title",children:t.time}),Object(C.jsx)("button",{className:"btn2 lnk-btn",onClick:function(){return i(!s)},children:s?Object(C.jsx)("p",{children:"Cancel"}):Object(C.jsx)("p",{children:"update"})}),Object(C.jsx)("div",{children:s?x:null})]})})},F=function(){var e=Object(o.c)(),t=Object(o.d)((function(e){return e.showReducer.show}));return Object(c.useEffect)((function(){e(A())}),[]),Object(c.useEffect)((function(){e(L("3"))})),Object(C.jsxs)("div",{className:"page-general",children:[Object(C.jsx)("div",{className:"hor-block",children:Object(C.jsx)("h1",{children:"Shows"})}),t?t.map((function(e,t){return Object(C.jsx)(U,{show:e},t)})):console.log("STATE NOT READY")]})},G=function(e){var t=e.mov,n=Object(o.c)(),r=Object(c.useState)(!1),a=Object(R.a)(r,2),s=a[0],i=a[1],j=Object(c.useState)(0),p=Object(R.a)(j,2),h=p[0],b=p[1],v=Object(c.useState)(),d=Object(R.a)(v,2),O=d[0],f=d[1],m=Object(C.jsx)("i",{className:"far fa-trash-alt"}),x=Object(C.jsxs)("form",{onSubmit:function(e){e.preventDefault();var c,r=Date.parse(O),a={title:t.name,hall:h,time:O,ts:r};n((c=a,function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.addShow(c);case 3:n=e.sent,t({type:"ADD_SHOW",_show:n}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("err in addShow",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}())),i(!1)},className:"ral",children:[Object(C.jsx)("input",{className:"input",type:"number",name:"hall",onChange:function(e){b(e.target.value)},placeholder:"Hall"}),Object(C.jsx)("input",{className:"input",type:"datetime-local",name:"time",onChange:function(e){f(e.target.value)}}),Object(C.jsx)("div",{children:Object(C.jsx)("button",{className:"btn-add",children:"Add"})})]});return Object(C.jsxs)("div",{className:"rb movie-strip",children:[Object(C.jsxs)("div",{className:"ral",children:[Object(C.jsx)("button",{className:"btn-del lnk-btn",onClick:function(){var e;n((e=t._id,function(){var t=Object(l.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,N.removeMov(e);case 3:n({type:"REMOVE_MOV",movId:e}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log("AnnActions: err in removeMov",t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}())),P.push("/movies")},children:m}),Object(C.jsx)("p",{className:"movie-title",children:t.name}),Object(C.jsx)("button",{className:"btn2 lnk-btn",onClick:function(){return i(!s)},children:s?Object(C.jsx)("p",{children:"\u25c4 Cancel"}):Object(C.jsx)("p",{children:"Add Show"})}),Object(C.jsx)("div",{children:s?x:null})]}),Object(C.jsx)("div",{className:"h-center",children:Object(C.jsxs)("p",{className:"movie-id",children:["id: ",t.id]})})]})},B=function(){var e=Object(o.c)(),t=Object(o.d)((function(e){return e.movReducer.mov}));return Object(c.useEffect)((function(){e(S())}),[]),Object(c.useEffect)((function(){e(L("2"))})),Object(C.jsxs)("div",{className:"page-general",children:[Object(C.jsxs)("div",{className:"hor-block",children:[Object(C.jsx)("h1",{children:"Our Movies"}),Object(C.jsx)("p",{children:"This is our local movie library. Use the items below to create shows"})]}),t?t.map((function(e,t){return Object(C.jsx)(G,{mov:e},t)})):null]})},J=n(4),X=Object(o.b)(null,null)(Object(J.f)((function(){return Object(C.jsx)("div",{className:"App",children:Object(C.jsx)("div",{className:"outter-container",children:Object(C.jsxs)("div",{className:"inner-container",children:[Object(C.jsx)(T,{}),Object(C.jsxs)(J.c,{children:[Object(C.jsx)(J.a,{exact:!0,component:W,path:"/"}),Object(C.jsx)(J.a,{exact:!0,component:F,path:"/shows"}),Object(C.jsx)(J.a,{exact:!0,component:B,path:"/movies"})]})]})})})}))),Y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,71)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))},q=n(14),z=n(39),K=n(22),Q=n(13),Z={mov:[]};var $={show:[]};var ee={pageName:"1"};var te=Object(q.c)({movReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"LOAD_MOV":return{mov:t.allMov};case"ADD_MOV":return Object(Q.a)(Object(Q.a)({},e),{},{mov:[].concat(Object(K.a)(e.mov),[e.mov.map((function(e){return t._mov._id===e._id?t._mov:e}))])});case"REMOVE_MOV":return Object(Q.a)(Object(Q.a)({},e),{},{mov:e.mov.filter((function(e){return e._id!==t.movId}))});default:return e}},showReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"LOAD_SHOW":return{show:t.allShow};case"ADD_SHOW":return Object(Q.a)(Object(Q.a)({},e),{},{show:[].concat(Object(K.a)(e.show),[e.show.map((function(e){return t._show._id===e._id?t._show:e}))])});case"REMOVE_SHOW":return Object(Q.a)(Object(Q.a)({},e),{},{show:e.show.filter((function(e){return e._id!==t.showId}))});case"UPDATE_SHOW":return Object(Q.a)(Object(Q.a)({},e),{},{show:e.show.map((function(e){return t._show._id===e._id?t._show:e}))});default:return e}},pageReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"PAGE_NAME":return{pageName:t.name};default:return e}}}),ne=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||q.d,ce=Object(q.e)(te,ne(Object(q.a)(z.a)));n(69);s.a.render(Object(C.jsx)(r.a.StrictMode,{children:Object(C.jsx)(J.b,{history:P,children:Object(C.jsx)(o.a,{store:ce,children:Object(C.jsx)(X,{})})})}),document.getElementById("root")),Y()}},[[70,1,2]]]);
//# sourceMappingURL=main.8bccddd2.chunk.js.map